---
title: Схемы объектов DataSet
author: dotnetcoding
type: post
date: 2012-07-25T10:53:52+00:00
url: /coding/shemy-ob-ektov-dataset.html
robotsmeta:
  - index,follow
categories:
  - .NET Программирование

---
Независимо от того, прочитали ли вы предыдущий раздел “Обзор XSD”, или предпочли пропустить его. т.к. вы уже знакомы с XSD — пора приступить к рассмотрению того, как можно применитьXSD к объектам DataSet.
  
будет рассматриваться применение XML-схем к объектам DataSec, отношение элементов и структур XSD непосредственно к рааличным аспектам поведения DataSet и их конфигурациям.<!--more-->


  
**Трансляция схемы
  
** 
  
Вначале важно уяснить, что в предыдущих примерах мы уже работали и взаимодействовали с различными схемами объектов DataSet, ничего не зная про XSD, и вы еще поработаете в том же духе ниже в данной главе. Имеется множество ситуаций. когда можно сделать что-нибудь полезное в ADO.NET, ничего не зная о соответствующих XML-схемах.

Теперь вы узнаете, как XML-схемы транслируются в понятия, которые DataSet предоставляют своим клиентам: таблицы, строки, столбцы, отношения, ключи и ограничения. Теоретически возможно сделать все. что нужно, просто перетащив таблицу из подключения к базе данных в Visual Studio .NET на класс DataSet, и совсем не глядеть в соответствующий XSD, но это может быть не всегда практично. Например, часто бывают ситуации, когда структура базы данных не соответствует структуре, которая нужна в DataSet.

Уверенное понимание того, как рааличные элементы в XSD влияют на различные аспекты поведения DataSet, может сэкономить времи, силы, объем кода и нервные клетки, когда сгенерированный мастером код похож на то, что нужно, но не совпадает в точности. Это хорошая предупредительная тактика программирования: считать любой сгенерированный мастером код лишь отправной точкой, который следует модифицировать перед его использованием. Перетаскивание определения таблицы из SQL Server в окно конструктора DacaSet в Visual Studio .NET может вполне выполнить нужную работу, но. имея некоторое представление о внутренних деталях, вы можете сделать гораздо больше. Однако постарайтесь ограничить выполняемые вручную изменения только сферой XSD — потому что С#- или VB.NET-код. сгенерированный MSOataSetGenerator (или XSD.ехе), затрет все ваши изменения. Поскольку ctporo типизированные DataSet реализованы в виде частичных классов, придется реализовать параллельный частичный класс, который не будет затираться при каждом изменении XSD-схемы.

**Генерация таблиц и столбцов**

Сейчас вы узнаете, как с помощью XSD описывать таблицы, строки и столбцы. В XSD-представлении для каждого объекта DataSet должен быть один корневой элемент, обозначающий сам DataSet. И уже в этом корневом элементе можно вставлять определения таблиц и столбцов для DataSet.

Таблицы описываются в виде составных элементов, входящих в состав корневого элемента. Столбцы представляются в виде дочерних элементов составных элементов, описывающих таблицы.

Рассмотрим простую схему книги, которая уже встречалась выше в данной главе, и преобразуем ее в схему DataSet. Вначале нужно определить самый внешний элемент — сам объект DataSet. Назовем его <BookDataSet>. Создайте в нем элемент с именем <Books>, а под ним еще два элемента: 

<Title>
  и <Publ isher>. </p>