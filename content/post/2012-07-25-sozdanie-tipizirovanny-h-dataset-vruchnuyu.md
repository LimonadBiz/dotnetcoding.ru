---
title: Создание типизированных DataSet вручную
author: dotnetcoding
type: post
date: 2012-07-25T10:57:30+00:00
url: /coding/sozdanie-tipizirovanny-h-dataset-vruchnuyu.html
robotsmeta:
  - index,follow
categories:
  - .NET Программирование

---
Мы уже рассмотрели, как создавать строго типизированные DataSet с помощью Visual Studio .NET. когда они автоматически становятся доступными для остальной части проекта. А теперь посмотрим, как сделать это “трудным&#187; способом. Конечно, это преувеличение, потому что на самом деле нет ничего сложного в применении средств командной строки для создания собственных строго типизированных DataSet.
  
<!--more-->


  
Не следует путать термин “вручную&#187; с самостоятельным написание всего кода для класса DataSet. Даже без Visual Studio .NET имеется средство XSD. ехе, которое автоматизирует генерирование файла класса. Такой подход удобен для пакетной генерации кода, обычно при промышленном развертывании или в автоматически созданных средах. Для &#171;ручного” примера мы создадим тот же пример, который уже был создан в Visual Studio .NET, хотя вся компиляция, редактирование кода и генерация DataSet будет выполнена из командной строки и Блокнота (или другого текстового редактора).
  
Самое первое, что нужно сделать — это создать новый каталог с именем Example 6.8. Скопируйте в него созданный вами файл BookDataSet. xsd, который содержит определения таблицы Books, таблицы BookReviews, ключей и родительского отношения keyref.

Теперь напишите пакетный файл для создания строго типизированного DataSet. Он называется BuiidDS. cmd, аего содержимое приведено ниже:

> C#
> 
> xsd /d /1:CS BookDataSet.xsd
> 
> VB.NET
> 
> xsd /d /1:VB BookDataSet.xsd

Этот пакетный файл вызывает утилиту XSD.ехе, которая генерирует файлы схем или классов из указанного источника. Чтобы этот пакетный файл смог работать, нужно выполнить его или из того же каталога, где находится xsd, или из явно указанного каталога. Он принимает схему и либо преобразовывает ее в классы, либо создает из нее типизированный DataSet (аргумент /d). Он также может создать XSD-файл из XDR-файла, чтобы модернизировать определение схемы. Версия /1 позволяет указать язык, на котором требуется сгенерировать строго типизированный DataSet.

При выполнении файла BuiidDS .bat создается в точности такая же версия строго типизированного DataSet, что и созданная с помощью Visual Studio .NET.